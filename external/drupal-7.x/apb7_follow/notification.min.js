var NotificationBlockList=[];(function(e){"use strict";var f=function(a,b){this.element=b;this.url=a};f.prototype={url:null,element:null,defaultDelay:8,delay:8,threshold:320,factor:1.5,running:false,startTimer:function(a){var b=this,delay=this.delay;if(this.running){return}if(a){delay=1;this.delay=this.defaultDelay}this.running=true;setTimeout(function(){if(!b.running){return}b.refresh();b.delay=Math.round(b.delay*b.factor);if(b.delay<b.threshold){b.running=false;b.startTimer()}},delay*1000)},refresh:function(){var d=this;e.ajax({url:this.url,async:true,cache:false,success:function(a,b,c){d.element.innerHTML=a;Drupal.behaviors.NotificationDropDown.attach(d.element.parentNode)},type:'GET'})}};Drupal.behaviors.NotificationDropDown={attach:function(b){var c=e(b).find("#notifications"),jTop=c.find(".top"),jList=c.find(".list"),displayed=false,first=true,jDocument=e(document);jList.hide();jTop.click(function(){if(displayed){jList.hide();displayed=false}else{jList.show();jDocument.mouseup(function(a){if(jList.has(a.target).length===0){jList.hide()}jDocument.mouseup(null);displayed=false});displayed=true;if(first){jTop.find(".unread").removeClass("unread");first=false}}})}};Drupal.behaviors.NotificationBlock={attach:function(a){if(Drupal.settings.notification&&Drupal.settings.notification.enabled){var b=Drupal.settings.notification.refreshUrl,element=null,notification=null;e(a).find('#notifications').each(function(){element=this;e(element).once('notification',function(){notification=new f(b,element);notification.startTimer(true);NotificationBlockList.push(notification)})})}}}})(jQuery);